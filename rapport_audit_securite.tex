\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{graphicx}
\usepackage{float}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{titlesec}

\geometry{margin=2.5cm}

% Configuration des listings pour Solidity
\lstdefinestyle{solidity}{
    language=Java,
    basicstyle=\ttfamily\footnotesize,
    keywordstyle=\color{blue}\bfseries,
    commentstyle=\color{green!60!black},
    stringstyle=\color{red},
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    numbersep=8pt,
    backgroundcolor=\color{gray!10},
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    frame=single,
    tabsize=2,
    captionpos=b,
    breaklines=true,
    breakatwhitespace=false,
    escapeinside={\%*}{*)},
    morekeywords={pragma, solidity, contract, function, modifier, require, address, public, payable, uint256, mapping, event, emit}
}

% En-t√™te et pied de page
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{Audit de S√©curit√© - Contr√¥le d'Acc√®s}
\fancyfoot[C]{\thepage}

% Page de garde personnalis√©e
\begin{document}

\begin{titlepage}
    \centering
    \vspace*{2cm}
    
    {\fontsize{28}{34}\selectfont\textbf{AUDIT DE S√âCURIT√â}}
    
    \vspace{0.5cm}
    
    {\fontsize{28}{34}\selectfont\textbf{Smart Contracts Ethereum}}
    
    \vspace{1.5cm}
    
    {\fontsize{20}{24}\selectfont\textbf{Vuln√©rabilit√© de Contr√¥le d'Acc√®s}}
    
    \vspace{0.5cm}
    
    {\fontsize{16}{20}\selectfont\textit{Analyse et D√©monstration d'Exploitation}}
    
    \vspace{3cm}
    
    {\fontsize{14}{17}\selectfont\textbf{Auteurs}}
    
    \vspace{0.3cm}
    
    {\fontsize{13}{16}\selectfont Mohamed Firas Ben Hmida}
    
    {\fontsize{13}{16}\selectfont Houssem Eddine Ben Chaabane}
    
    \vspace{2cm}
    
    {\fontsize{12}{15}\selectfont √âtude de cas : Fonction \texttt{changeOwner()}}
    
    \vspace{3cm}
    
    {\fontsize{11}{13}\selectfont TEK-UP University}
    
\end{titlepage}

\thispagestyle{empty}
\newpage

\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{Audit de S√©curit√© - Contr√¥le d'Acc√®s}
\fancyfoot[C]{\thepage}

% Table des Mati√®res
\tableofcontents
\newpage

% Table des Figures
\listoffigures
\newpage

%=====================================================================
% SECTION 1 : INTRODUCTION
%=====================================================================
\section{Introduction}

\subsection{Contexte}
Les smart contracts Ethereum g√®rent des milliards de dollars en actifs num√©riques. Une seule vuln√©rabilit√© de s√©curit√© peut entra√Æner des pertes catastrophiques. Le contr√¥le d'acc√®s est un aspect fondamental de la s√©curit√© des smart contracts, permettant de restreindre certaines fonctions aux utilisateurs autoris√©s.

\subsection{Objectifs de l'Audit}
\begin{itemize}
    \item Identifier les vuln√©rabilit√©s de contr√¥le d'acc√®s dans les smart contracts
    \item D√©montrer l'impact r√©el d'une exploitation r√©ussie
    \item Proposer des solutions de s√©curisation efficaces
    \item √âtablir des bonnes pratiques pour le d√©veloppement s√©curis√©
\end{itemize}

\subsection{M√©thodologie}
\begin{enumerate}
    \item Analyse du code source (revue manuelle)
    \item D√©veloppement de tests d'exploitation
    \item D√©monstration pratique avec interface web
    \item Impl√©mentation d'une solution s√©curis√©e
    \item Tests de validation de la correction
\end{enumerate}

%=====================================================================
% SECTION 2 : ANALYSE DE LA VULN√âRABILIT√â
%=====================================================================
\section{Analyse de la Vuln√©rabilit√©}

\subsection{Description de la Vuln√©rabilit√©}

La vuln√©rabilit√© identifi√©e est une \textbf{absence de contr√¥le d'acc√®s} sur la fonction \texttt{changeOwner()}. Cette fonction critique permet de changer le propri√©taire du contrat, mais ne v√©rifie pas l'identit√© de l'appelant. Cela signifie que \textbf{n'importe quel utilisateur} peut prendre le contr√¥le du contrat.

\subsection{Code Vuln√©rable}

\begin{lstlisting}[style=solidity, caption={VulnerableBank.sol - Fonction vuln√©rable}]
contract VulnerableBank {
    address public owner;
    mapping(address => uint256) public balances;
    
    constructor() {
        owner = msg.sender;
    }
    
    // VULNERABILITE : Aucun controle d'acces !
    function changeOwner(address newOwner) public {
        owner = newOwner;
        emit OwnerChanged(newOwner);
    }
    
    function emergencyWithdraw() public {
        require(msg.sender == owner, "Not owner!");
        payable(owner).transfer(address(this).balance);
    }
    
    // ... autres fonctions
}
\end{lstlisting}

\subsection{Impact de la Vuln√©rabilit√©}

\textbf{S√©v√©rit√© : CRITIQUE}

\begin{itemize}
    \item \textbf{Prise de contr√¥le totale} : Un attaquant peut devenir propri√©taire du contrat
    \item \textbf{Vol de fonds} : Acc√®s √† la fonction \texttt{emergencyWithdraw()} pour voler tous les fonds
    \item \textbf{Perte irr√©versible} : Les transactions blockchain sont immuables
    \item \textbf{Co√ªt d'exploitation} : Tr√®s faible (seulement les frais de gas)
\end{itemize}

\subsection{Architecture du Contrat Vuln√©rable}

% INSTRUCTION POUR SCREENSHOT 1
% =============================
% SCREENSHOT 1 : Code VulnerableBank.sol dans VS Code
% QUE FAIRE :
% 1. Ouvrir le fichier contracts/VulnerableBank.sol dans VS Code
% 2. Faire d√©filer jusqu'√† la fonction changeOwner() (ligne ~60-65)
% 3. Mettre en surbrillance la fonction changeOwner() compl√®te
% 4. Capturer l'√©cran montrant clairement l'absence de modificateur
% 5. Sauvegarder comme : screenshot1_code_vulnerable.png
% 6. D√©commenter la ligne ci-dessous et compiler le PDF

\begin{figure}[H]
    \centering
    \includegraphics[width=0.9\textwidth]{screenshot1_code_vulnerable.png}
    \caption{Code source de VulnerableBank.sol montrant la fonction changeOwner() sans protection}
    \label{fig:code_vulnerable}
\end{figure}

%=====================================================================
% SECTION 3 : D√âMONSTRATION DE L'EXPLOITATION
%=====================================================================
\section{D√©monstration de l'Exploitation}

\subsection{Environnement de Test}

\begin{itemize}
    \item \textbf{Blockchain} : Hardhat Local Network (Chain ID: 1337)
    \item \textbf{Langage} : Solidity 0.8.20
    \item \textbf{Framework} : Hardhat 2.22.0
    \item \textbf{Tests} : Ethers.js v6 + Chai
    \item \textbf{Interface} : Application Web HTML/CSS/JavaScript + MetaMask
\end{itemize}

\subsection{Sc√©nario d'Attaque}

\textbf{√âtape 1 : √âtat Initial}
\begin{itemize}
    \item Propri√©taire l√©gitime : \texttt{0xf39F...92266}
    \item Contrat contient : 1.0 ETH (d√©pos√© par des utilisateurs)
    \item Attaquant : \texttt{0x7099...79C8} (compte non autoris√©)
\end{itemize}

% INSTRUCTION POUR SCREENSHOT 2
% =============================
% SCREENSHOT 2 : Interface web - √âtat initial avant l'attaque
% QUE FAIRE :
% 1. Se connecter avec le compte Owner (Account 1)
% 2. D√©poser 1 ETH dans VulnerableBank
% 3. V√©rifier que "Owner" montre l'adresse 0xf39F...92266
% 4. V√©rifier que "Contract Balance" montre 1.0 ETH
% 5. Capturer tout l'√©cran de l'interface web
% 6. Sauvegarder comme : screenshot2_etat_initial.png
% 7. D√©commenter la ligne ci-dessous

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth]{screenshot2_etat_initial.png}
    \caption{√âtat initial du contrat - 1 ETH d√©pos√© par le propri√©taire l√©gitime}
    \label{fig:etat_initial}
\end{figure}

\textbf{√âtape 2 : Changement de Propri√©taire (Attaque)}

L'attaquant appelle simplement la fonction \texttt{changeOwner()} avec sa propre adresse en param√®tre. Aucune v√©rification n'est effectu√©e, la transaction r√©ussit.

% INSTRUCTION POUR SCREENSHOT 3
% =============================
% SCREENSHOT 3 : Interface web - Apr√®s changement de propri√©taire
% QUE FAIRE :
% 1. Basculer vers le compte Attacker (Account 2) dans MetaMask
% 2. Rafra√Æchir la page et se reconnecter
% 3. Cliquer sur "Change Owner (Attack!)" dans VulnerableBank
% 4. Confirmer la transaction dans MetaMask
% 5. Cliquer sur "Refresh" pour mettre √† jour l'affichage
% 6. IMPORTANT : V√©rifier que "Owner" montre maintenant 0x7099...79C8
% 7. Capturer l'√©cran montrant le changement d'owner ET le log de transaction
% 8. Sauvegarder comme : screenshot3_owner_change.png
% 9. D√©commenter la ligne ci-dessous

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth]{screenshot3_owner_change.png}
    \caption{Changement de propri√©taire r√©ussi - L'attaquant est maintenant owner}
    \label{fig:owner_change}
\end{figure}

\textbf{√âtape 3 : Vol des Fonds}

Maintenant propri√©taire, l'attaquant peut appeler \texttt{emergencyWithdraw()} pour retirer tous les fonds du contrat.

% INSTRUCTION POUR SCREENSHOT 4
% =============================
% SCREENSHOT 4 : Interface web - Apr√®s vol des fonds
% QUE FAIRE :
% 1. Toujours connect√© en tant qu'attaquant
% 2. Cliquer sur "Withdraw Contract Balance" dans VulnerableBank
% 3. Confirmer la transaction dans MetaMask
% 4. Cliquer sur "Refresh"
% 5. IMPORTANT : V√©rifier que "Contract Balance" montre maintenant 0.0 ETH
% 6. Capturer l'√©cran montrant le solde vide ET le log complet de l'attaque
% 7. Sauvegarder comme : screenshot4_fonds_voles.png
% 8. D√©commenter la ligne ci-dessous

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth]{screenshot4_fonds_voles.png}
    \caption{Vol des fonds r√©ussi - Le contrat est maintenant vide (0.0 ETH)}
    \label{fig:fonds_voles}
\end{figure}

\subsection{R√©sultats de l'Exploitation}

\begin{table}[H]
\centering
\begin{tabular}{|l|c|c|}
\hline
\textbf{Param√®tre} & \textbf{Avant Attaque} & \textbf{Apr√®s Attaque} \\
\hline
Propri√©taire & 0xf39F...92266 & 0x7099...79C8 \\
Solde du contrat & 1.0 ETH & 0.0 ETH \\
Solde de l'attaquant & 10000.0 ETH & 10001.0 ETH \\
Transactions malveillantes & 0 & 2 \\
\hline
\end{tabular}
\caption{Impact de l'exploitation sur le contrat}
\label{tab:impact}
\end{table}

\subsection{R√©sultats des Tests Automatis√©s}

% INSTRUCTION POUR SCREENSHOT 5
% =============================
% SCREENSHOT 5 : R√©sultats des tests (npx hardhat test)
% QUE FAIRE :
% 1. Ouvrir un nouveau terminal PowerShell
% 2. Naviguer vers C:\BlockChain\AccessControlProject
% 3. Ex√©cuter : npx hardhat test
% 4. Attendre que tous les 12 tests passent (‚úì passing)
% 5. Capturer l'√©cran montrant TOUS les r√©sultats des tests
% 6. Important : Montrer les tests VulnerableBank ET SecureBank
% 7. Sauvegarder comme : screenshot5_tests_results.png
% 8. D√©commenter la ligne ci-dessous

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth]{screenshot5_tests_results.png}
    \caption{R√©sultats des tests automatis√©s - 12 tests pass√©s avec succ√®s}
    \label{fig:tests}
\end{figure}

Les tests automatis√©s confirment la vuln√©rabilit√© :
\begin{itemize}
    \item ‚úÖ \textbf{VulnerableBank} : L'attaquant PEUT changer le propri√©taire
    \item ‚úÖ \textbf{VulnerableBank} : L'attaquant PEUT voler tous les fonds
    \item ‚úÖ \textbf{SecureBank} : L'attaquant NE PEUT PAS changer le propri√©taire
    \item ‚úÖ \textbf{SecureBank} : Les fonds sont prot√©g√©s
\end{itemize}

%=====================================================================
% SECTION 4 : SOLUTION DE S√âCURISATION
%=====================================================================
\section{Solution de S√©curisation}

\subsection{Impl√©mentation du Modificateur onlyOwner}

La solution consiste √† ajouter un \textbf{modificateur de contr√¥le d'acc√®s} qui v√©rifie l'identit√© de l'appelant avant d'ex√©cuter la fonction.

\begin{lstlisting}[style=solidity, caption={SecureBank.sol - Contrat s√©curis√© avec modificateur}]
contract SecureBank {
    address public owner;
    mapping(address => uint256) public balances;
    
    constructor() {
        owner = msg.sender;
    }
    
    // MODIFICATEUR DE SECURITE
    modifier onlyOwner() {
        require(msg.sender == owner, "Not owner!");
        _;
    }
    
    // FONCTION SECURISEE avec modificateur
    function changeOwner(address newOwner) public onlyOwner {
        require(newOwner != address(0), "Invalid address");
        owner = newOwner;
        emit OwnerChanged(newOwner);
    }
    
    function emergencyWithdraw() public onlyOwner {
        payable(owner).transfer(address(this).balance);
    }
    
    // ... autres fonctions
}
\end{lstlisting}

\subsection{Explication Technique}

\textbf{Modificateur \texttt{onlyOwner}} :
\begin{itemize}
    \item \texttt{require(msg.sender == owner)} : V√©rifie que l'appelant est le propri√©taire
    \item Si la condition √©choue : la transaction est annul√©e (revert) avec le message "Not owner!"
    \item Si la condition r√©ussit : l'ex√©cution continue avec \texttt{\_;}
\end{itemize}

\textbf{Avantages de cette solution} :
\begin{itemize}
    \item ‚úÖ Simple √† impl√©menter
    \item ‚úÖ R√©utilisable sur plusieurs fonctions
    \item ‚úÖ Code plus lisible et maintenable
    \item ‚úÖ Co√ªt en gas minimal
    \item ‚úÖ Standard de l'industrie (OpenZeppelin)
\end{itemize}

% INSTRUCTION POUR SCREENSHOT 6
% =============================
% SCREENSHOT 6 : Code SecureBank.sol dans VS Code
% QUE FAIRE :
% 1. Ouvrir le fichier contracts/SecureBank.sol dans VS Code
% 2. Faire d√©filer pour montrer le modificateur onlyOwner (ligne ~25-28)
% 3. Montrer aussi la fonction changeOwner() avec le modificateur (ligne ~60-65)
% 4. Utiliser split screen pour montrer les deux en m√™me temps si possible
% 5. Capturer l'√©cran montrant clairement le modificateur
% 6. Sauvegarder comme : screenshot6_code_secure.png
% 7. D√©commenter la ligne ci-dessous

\begin{figure}[H]
    \centering
    \includegraphics[width=0.9\textwidth]{screenshot6_code_secure.png}
    \caption{Code source de SecureBank.sol avec le modificateur onlyOwner}
    \label{fig:code_secure}
\end{figure}

\subsection{Validation de la Correction}

% INSTRUCTION POUR SCREENSHOT 7
% =============================
% SCREENSHOT 7 : Interface web - Tentative d'attaque bloqu√©e
% QUE FAIRE :
% 1. Red√©ployer les contrats (npx hardhat run scripts/deploy.js --network localhost)
% 2. Rafra√Æchir l'interface web et reconnecter MetaMask
% 3. Se connecter avec le compte Attacker (Account 2)
% 4. Dans SecureBank, cliquer sur "Try Change Owner"
% 5. Confirmer la transaction dans MetaMask
% 6. IMPORTANT : V√©rifier que le log montre "Not owner!" error
% 7. Capturer l'√©cran montrant l'erreur dans le log de transactions
% 8. Sauvegarder comme : screenshot7_attaque_bloquee.png
% 9. D√©commenter la ligne ci-dessous

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth]{screenshot7_attaque_bloquee.png}
    \caption{Tentative d'attaque bloqu√©e apr√®s changement de propri√©taire - Impossible de retirer les fonds ("Not owner!")}
    \label{fig:attaque_bloquee}
\end{figure}

Les tests confirment que la correction fonctionne :
\begin{itemize}
    \item ‚ùå L'attaquant ne peut plus changer le propri√©taire
    \item ‚ùå La transaction √©choue avec l'erreur "Not owner!"
    \item ‚úÖ Le propri√©taire l√©gitime peut toujours effectuer l'op√©ration
    \item ‚úÖ Les fonds sont prot√©g√©s contre le vol
\end{itemize}

%=====================================================================
% SECTION 5 : COMPARAISON ET ANALYSE
%=====================================================================
\section{Comparaison des Deux Contrats}

\subsection{Tableau Comparatif}

\begin{table}[H]
\centering
\begin{tabular}{|l|c|c|}
\hline
\textbf{Aspect} & \textbf{VulnerableBank} & \textbf{SecureBank} \\
\hline
Modificateur onlyOwner & ‚ùå Non & ‚úÖ Oui \\
Protection changeOwner() & ‚ùå Non & ‚úÖ Oui \\
Attaque possible & ‚úÖ Oui & ‚ùå Non \\
Vol de fonds possible & ‚úÖ Oui & ‚ùå Non \\
Validation d'adresse & ‚ùå Non & ‚úÖ Oui \\
S√©curit√© & üî¥ CRITIQUE & üü¢ S√âCURIS√â \\
Complexit√© du code & Simple & Simple+ \\
Co√ªt en gas & Faible & Faible+ \\
\hline
\end{tabular}
\caption{Comparaison entre VulnerableBank et SecureBank}
\label{tab:comparaison}
\end{table}

\subsection{Analyse des Co√ªts}

\textbf{Co√ªt de l'attaque} :
\begin{itemize}
    \item Transaction changeOwner() : ~30,000 gas (~\$0.60 √† 20 gwei)
    \item Transaction emergencyWithdraw() : ~25,000 gas (~\$0.50 √† 20 gwei)
    \item \textbf{Total} : ~\$1.10 pour voler potentiellement des millions
\end{itemize}

\textbf{Co√ªt de la s√©curisation} :
\begin{itemize}
    \item Ajout du modificateur : ~200 gas suppl√©mentaires par appel
    \item Impact n√©gligeable sur le co√ªt total
    \item \textbf{ROI} : Protection contre des pertes potentielles illimit√©es
\end{itemize}

%=====================================================================
% SECTION 6 : EXEMPLES R√âELS
%=====================================================================
\section{Cas R√©els de Vuln√©rabilit√©s Similaires}

\subsection{Incidents Historiques}

\textbf{1. Parity Multi-Sig Wallet (2017)}
\begin{itemize}
    \item \textbf{Montant perdu} : 150+ millions USD
    \item \textbf{Cause} : Fonction d'initialisation non prot√©g√©e
    \item \textbf{Impact} : Fonds gel√©s d√©finitivement
\end{itemize}

\textbf{2. Rubixi Contract (2016)}
\begin{itemize}
    \item \textbf{Montant perdu} : Plusieurs ETH
    \item \textbf{Cause} : Fonction de changement de cr√©ateur publique
    \item \textbf{Impact} : Prise de contr√¥le par un attaquant
\end{itemize}

\textbf{3. DeFi Exploits (2020-2023)}
\begin{itemize}
    \item Multiples protocoles DeFi attaqu√©s
    \item Fonctions administratives non prot√©g√©es
    \item Pertes cumul√©es : plusieurs centaines de millions USD
\end{itemize}

\subsection{Le√ßons Apprises}

\begin{itemize}
    \item Le contr√¥le d'acc√®s est \textbf{critique} pour toute fonction sensible
    \item Les audits de s√©curit√© sont \textbf{essentiels} avant le d√©ploiement
    \item Utiliser des \textbf{biblioth√®ques √©prouv√©es} (OpenZeppelin)
    \item Impl√©menter des \textbf{tests exhaustifs} couvrant les cas d'attaque
    \item La \textbf{simplicit√©} du code r√©duit les risques d'erreur
\end{itemize}

%=====================================================================
% SECTION 7 : RECOMMANDATIONS
%=====================================================================
\section{Recommandations et Bonnes Pratiques}

\subsection{Contr√¥le d'Acc√®s}

\begin{enumerate}
    \item \textbf{Utiliser OpenZeppelin Ownable}
    \begin{lstlisting}[style=solidity]
import "@openzeppelin/contracts/access/Ownable.sol";

contract MyContract is Ownable {
    // Le contrat herite automatiquement du modificateur onlyOwner
    function sensitiveFunction() public onlyOwner {
        // Code protege
    }
}
    \end{lstlisting}

    \item \textbf{Impl√©menter le contr√¥le d'acc√®s bas√© sur les r√¥les (RBAC)}
    \begin{lstlisting}[style=solidity]
import "@openzeppelin/contracts/access/AccessControl.sol";

contract MyContract is AccessControl {
    bytes32 public constant ADMIN_ROLE = keccak256("ADMIN_ROLE");
    
    function adminFunction() public onlyRole(ADMIN_ROLE) {
        // Fonction reservee aux admins
    }
}
    \end{lstlisting}

    \item \textbf{Principe du moindre privil√®ge} : Limiter les permissions au strict n√©cessaire

    \item \textbf{S√©paration des r√¥les} : Distinguer owner, admin, operator, etc.
\end{enumerate}

\subsection{Tests de S√©curit√©}

\begin{enumerate}
    \item \textbf{Tests unitaires complets}
    \begin{itemize}
        \item Tester chaque fonction avec utilisateur autoris√©
        \item Tester chaque fonction avec utilisateur non autoris√©
        \item V√©rifier les messages d'erreur appropri√©s
    \end{itemize}

    \item \textbf{Tests d'int√©gration}
    \begin{itemize}
        \item Sc√©narios d'attaque complets
        \item Interactions entre contrats
        \item Edge cases et conditions limites
    \end{itemize}

    \item \textbf{Fuzzing et tests automatis√©s}
    \begin{itemize}
        \item Utiliser Echidna ou Foundry pour le fuzzing
        \item Tests de propri√©t√©s avec assertions
        \item CI/CD avec tests automatiques
    \end{itemize}
\end{enumerate}

\subsection{Audits et Revue de Code}

\begin{enumerate}
    \item \textbf{Audit de s√©curit√© professionnel}
    \begin{itemize}
        \item Obligatoire avant le d√©ploiement en production
        \item Entreprises r√©put√©es : ConsenSys, Trail of Bits, OpenZeppelin
    \end{itemize}

    \item \textbf{Revue par les pairs}
    \begin{itemize}
        \item Code review syst√©matique
        \item Checklist de s√©curit√©
        \item Documentation compl√®te
    \end{itemize}

    \item \textbf{Bug Bounty Programs}
    \begin{itemize}
        \item R√©compenser la d√©couverte de vuln√©rabilit√©s
        \item Plateformes : Immunefi, HackerOne
    \end{itemize}
\end{enumerate}

\subsection{D√©ploiement S√©curis√©}

\begin{enumerate}
    \item \textbf{Tests sur testnet} : Ropsten, Goerli, Sepolia
    \item \textbf{D√©ploiement progressif} : Commencer avec des montants limit√©s
    \item \textbf{Monitoring en temps r√©el} : Alertes sur transactions suspectes
    \item \textbf{Circuit breaker} : Possibilit√© de pause en cas d'urgence
    \item \textbf{Upgrade pattern} : Pr√©voir la mise √† jour du contrat si n√©cessaire
\end{enumerate}

%=====================================================================
% SECTION 8 : CONCLUSION
%=====================================================================
\section{Conclusion}

\subsection{R√©sum√© des D√©couvertes}

Cet audit a d√©montr√© l'impact critique d'une vuln√©rabilit√© de contr√¥le d'acc√®s :

\begin{itemize}
    \item ‚úÖ \textbf{Vuln√©rabilit√© identifi√©e} : Absence de modificateur onlyOwner sur changeOwner()
    \item ‚úÖ \textbf{Exploitation r√©ussie} : Prise de contr√¥le et vol de tous les fonds
    \item ‚úÖ \textbf{Solution impl√©ment√©e} : Ajout du modificateur de contr√¥le d'acc√®s
    \item ‚úÖ \textbf{Validation compl√®te} : Tests automatis√©s et d√©monstration web
\end{itemize}

\subsection{Impact de la Vuln√©rabilit√©}

\textbf{Sans protection} :
\begin{itemize}
    \item Co√ªt d'exploitation : ~\$1
    \item Temps d'exploitation : < 2 minutes
    \item Pertes potentielles : Illimit√©es
    \item D√©tection : Possible mais souvent trop tard
\end{itemize}

\textbf{Avec protection} :
\begin{itemize}
    \item Co√ªt suppl√©mentaire : ~200 gas par transaction
    \item Protection : 100\% contre ce type d'attaque
    \item Conformit√© : Standards de l'industrie
\end{itemize}

\subsection{Perspectives}

Le contr√¥le d'acc√®s est une pierre angulaire de la s√©curit√© des smart contracts. Ce projet d√©montre que :

\begin{enumerate}
    \item Les vuln√©rabilit√©s simples peuvent avoir des cons√©quences catastrophiques
    \item Les solutions existent et sont faciles √† impl√©menter
    \item Les tests et la validation sont essentiels
    \item La s√©curit√© doit √™tre int√©gr√©e d√®s la conception
\end{enumerate}

\subsection{Travaux Futurs}

\begin{itemize}
    \item Extension √† d'autres types de vuln√©rabilit√©s (reentrancy, overflow, etc.)
    \item Impl√©mentation d'un syst√®me de gouvernance d√©centralis√©
    \item Int√©gration avec des outils d'analyse statique (Slither, Mythril)
    \item D√©ploiement sur testnet public pour d√©monstration √©tendue
\end{itemize}

%=====================================================================
% ANNEXES
%=====================================================================
\newpage
\appendix

\section{Configuration de l'Environnement}

\subsection{Pr√©requis}
\begin{itemize}
    \item Node.js 20.x ou sup√©rieur
    \item npm 9.x ou sup√©rieur
    \item MetaMask (extension navigateur)
    \item Git (optionnel)
\end{itemize}

\subsection{Installation}

\begin{lstlisting}[language=bash, caption={Installation du projet}]
# Cloner le repository
git clone https://github.com/votre-repo/AccessControlProject
cd AccessControlProject

# Installer les dependances
npm install

# Compiler les contrats
npx hardhat compile

# Lancer les tests
npx hardhat test

# Demarrer le noeud local
npx hardhat node

# Deployer les contrats
npx hardhat run scripts/deploy.js --network localhost
\end{lstlisting}

\section{Structure du Projet}

\begin{lstlisting}[language=bash]
AccessControlProject/
‚îú‚îÄ‚îÄ contracts/
‚îÇ   ‚îú‚îÄ‚îÄ VulnerableBank.sol    # Contrat vulnerable
‚îÇ   ‚îî‚îÄ‚îÄ SecureBank.sol         # Contrat securise
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îî‚îÄ‚îÄ AccessControl.test.js  # Suite de tests (12 tests)
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ deploy.js              # Script de deploiement
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ index.html             # Interface web
‚îÇ   ‚îú‚îÄ‚îÄ style.css              # Styles
‚îÇ   ‚îî‚îÄ‚îÄ app.js                 # Logique MetaMask
‚îú‚îÄ‚îÄ hardhat.config.js          # Configuration Hardhat
‚îî‚îÄ‚îÄ package.json               # Dependances npm
\end{lstlisting}

\section{Adresses des Contrats D√©ploy√©s}

\begin{table}[H]
\centering
\begin{tabular}{|l|l|}
\hline
\textbf{Contrat} & \textbf{Adresse} \\
\hline
VulnerableBank & 0x5FbDB2315678afecb367f032d93F642f64180aa3 \\
SecureBank & 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512 \\
\hline
\end{tabular}
\caption{Adresses des contrats sur le r√©seau local Hardhat}
\end{table}

\end{document}
